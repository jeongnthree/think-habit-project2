<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Think-Habit Journal ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Îç∞Î™®</title>
    <style>
      :root {
        --primary-color: #4a6fa5;
        --primary-hover: #3a5a8a;
        --secondary-color: #6c757d;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --light-bg: #f8f9fa;
        --dark-text: #343a40;
        --light-text: #f8f9fa;
        --border-color: #dee2e6;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--dark-text);
        background-color: var(--light-bg);
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-color);
      }

      .app-title {
        font-size: 24px;
        color: var(--primary-color);
      }

      .version-info {
        font-size: 14px;
        color: var(--secondary-color);
      }

      .card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-bottom: 20px;
      }

      .card-title {
        font-size: 18px;
        margin-bottom: 15px;
        color: var(--primary-color);
      }

      .upload-area {
        border: 2px dashed #d1d5db;
        border-radius: 12px;
        padding: 2rem;
        text-align: center;
        background: #fafafa;
        transition: all 0.3s ease;
        cursor: pointer;
        margin-bottom: 20px;
      }

      .upload-area:hover {
        border-color: #3b82f6;
        background: #f8faff;
      }

      .upload-area.drag-over {
        border-color: #10b981;
        background: #f0fdf4;
        transform: scale(1.02);
      }

      .upload-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }

      .upload-icon {
        font-size: 3rem;
        margin-bottom: 0.5rem;
      }

      .upload-content h3 {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
        margin: 0;
      }

      .upload-content p {
        color: #6b7280;
        margin: 0;
        line-height: 1.5;
      }

      .upload-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 0.5rem;
      }

      .btn {
        display: inline-block;
        font-weight: 400;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        user-select: none;
        border: 1px solid transparent;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0.25rem;
        transition:
          color 0.15s ease-in-out,
          background-color 0.15s ease-in-out,
          border-color 0.15s ease-in-out,
          box-shadow 0.15s ease-in-out;
        cursor: pointer;
      }

      .btn-primary {
        color: white;
        background-color: var(--primary-color);
        border-color: var(--primary-color);
      }

      .btn-primary:hover {
        background-color: var(--primary-hover);
        border-color: var(--primary-hover);
      }

      .btn-secondary {
        color: white;
        background-color: var(--secondary-color);
        border-color: var(--secondary-color);
      }

      .btn-secondary:hover {
        background-color: #5a6268;
        border-color: #545b62;
      }

      .btn-danger {
        color: white;
        background-color: var(--danger-color);
        border-color: var(--danger-color);
      }

      .btn-danger:hover {
        background-color: #c82333;
        border-color: #bd2130;
      }

      .photos-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
      }

      .photo-preview {
        position: relative;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .photo-preview:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      }

      .photo-container {
        position: relative;
        aspect-ratio: 1;
        overflow: hidden;
      }

      .photo-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .photo-preview:hover .photo-image {
        transform: scale(1.05);
      }

      .photo-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.7) 0%,
          transparent 30%,
          transparent 70%,
          rgba(0, 0, 0, 0.7) 100%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 0.75rem;
      }

      .photo-preview:hover .photo-overlay {
        opacity: 1;
      }

      .photo-info {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .photo-name {
        color: white;
        font-size: 0.75rem;
        font-weight: 500;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .photo-size {
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.625rem;
      }

      .photo-actions {
        display: flex;
        justify-content: flex-end;
        gap: 0.5rem;
      }

      .photo-action-button {
        width: 2rem;
        height: 2rem;
        border: none;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        cursor: pointer;
        font-size: 0.875rem;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .photo-action-button:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .photo-action-button.delete:hover {
        background: rgba(239, 68, 68, 0.8);
      }

      .photo-index {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        width: 1.5rem;
        height: 1.5rem;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .progress-container {
        margin-top: 20px;
        display: none;
      }

      .progress-bar {
        width: 100%;
        height: 10px;
        background-color: #e9ecef;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 10px;
      }

      .progress-fill {
        height: 100%;
        background-color: var(--primary-color);
        border-radius: 5px;
        transition: width 0.3s ease;
      }

      .progress-text {
        font-size: 14px;
        color: var(--secondary-color);
        text-align: center;
      }

      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        background-color: var(--primary-color);
        color: white;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        opacity: 0;
        transform: translateY(-20px);
        transition:
          opacity 0.3s,
          transform 0.3s;
      }

      .notification.show {
        opacity: 1;
        transform: translateY(0);
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
      }

      .form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 16px;
      }

      textarea.form-control {
        min-height: 100px;
        resize: vertical;
      }

      @media (max-width: 768px) {
        .upload-buttons {
          flex-direction: column;
        }

        .photos-grid {
          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 class="app-title">Think-Habit Journal ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Îç∞Î™®</h1>
        <div class="version-info">v1.0.0 (Ïõπ)</div>
      </div>

      <div class="card">
        <h2 class="card-title">ÏÇ¨ÏßÑ ÏùºÏßÄ ÏûëÏÑ±</h2>

        <div class="form-group">
          <label for="journal-title">Ï†úÎ™©</label>
          <input
            type="text"
            id="journal-title"
            class="form-control"
            placeholder="ÏùºÏßÄ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
          />
        </div>

        <div class="form-group">
          <label for="journal-description">ÏÑ§Î™Ö</label>
          <textarea
            id="journal-description"
            class="form-control"
            placeholder="ÏÇ¨ÏßÑÏóê ÎåÄÌïú ÏÑ§Î™ÖÏù¥ÎÇò Ïò§ÎäòÏùò Ïù¥ÏïºÍ∏∞Î•º ÏûêÏú†Î°≠Í≤å ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî..."
          ></textarea>
        </div>

        <div class="upload-area" id="upload-area">
          <div class="upload-content">
            <div class="upload-icon">üì∑</div>
            <h3>ÏÇ¨ÏßÑ Ï∂îÍ∞Ä</h3>
            <p id="photo-count">
              ÏÇ¨ÏßÑÏùÑ ÎìúÎûòÍ∑∏ÌïòÏó¨ ÎÜìÍ±∞ÎÇò ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî
            </p>

            <div class="upload-buttons">
              <button id="select-files-btn" class="btn btn-primary">
                üìÅ ÌååÏùº ÏÑ†ÌÉù
              </button>
              <button id="camera-btn" class="btn btn-secondary">
                üì∏ Ïπ¥Î©îÎùº
              </button>
            </div>
          </div>
        </div>

        <div class="progress-container" id="progress-container">
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="progress-text" id="progress-text">ÏóÖÎ°úÎìú Ï§ë...</div>
        </div>

        <div class="photos-grid" id="photos-grid"></div>

        <div style="margin-top: 20px; text-align: right">
          <button id="save-btn" class="btn btn-primary">Ï†ÄÏû•</button>
        </div>
      </div>
    </div>

    <div id="notification" class="notification"></div>

    <input
      type="file"
      id="file-input"
      accept="image/*"
      multiple
      style="display: none"
    />

    <script>
      // DOM ÏöîÏÜå
      const uploadArea = document.getElementById("upload-area");
      const fileInput = document.getElementById("file-input");
      const selectFilesBtn = document.getElementById("select-files-btn");
      const cameraBtn = document.getElementById("camera-btn");
      const photosGrid = document.getElementById("photos-grid");
      const photoCount = document.getElementById("photo-count");
      const progressContainer = document.getElementById("progress-container");
      const progressFill = document.getElementById("progress-fill");
      const progressText = document.getElementById("progress-text");
      const saveBtn = document.getElementById("save-btn");
      const notification = document.getElementById("notification");
      const journalTitle = document.getElementById("journal-title");
      const journalDescription = document.getElementById("journal-description");

      // ÏÉÅÌÉú Í¥ÄÎ¶¨
      let photos = [];
      const maxPhotos = 10;

      // ÌååÏùº ÏÑ†ÌÉù Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
      selectFilesBtn.addEventListener("click", () => {
        fileInput.click();
      });

      // ÌååÏùº ÏûÖÎ†• Î≥ÄÍ≤Ω Ïù¥Î≤§Ìä∏
      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) {
          handleFiles(e.target.files);
        }
      });

      // Ïπ¥Î©îÎùº Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
      cameraBtn.addEventListener("click", () => {
        // Ïõπ ÌôòÍ≤ΩÏóêÏÑúÎäî ÌååÏùº ÏÑ†ÌÉù ÎåÄÌôîÏÉÅÏûêÎ•º Ïó¥Í≥† Ïπ¥Î©îÎùº ÏòµÏÖòÏùÑ Ï†úÍ≥µ
        const input = document.createElement("input");
        input.type = "file";
        input.accept = "image/*";
        input.capture = "camera";

        input.onchange = (e) => {
          if (e.target.files.length > 0) {
            handleFiles(e.target.files);
          }
        };

        input.click();
      });

      // ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ Ïù¥Î≤§Ìä∏
      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("drag-over");
      });

      uploadArea.addEventListener("dragleave", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("drag-over");
      });

      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("drag-over");

        if (e.dataTransfer.files.length > 0) {
          handleFiles(e.dataTransfer.files);
        }
      });

      // ÌååÏùº Ï≤òÎ¶¨ Ìï®Ïàò
      function handleFiles(files) {
        const imageFiles = Array.from(files).filter((file) =>
          file.type.startsWith("image/"),
        );

        if (imageFiles.length === 0) {
          showNotification("Ïù¥ÎØ∏ÏßÄ ÌååÏùºÎßå ÏóÖÎ°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§.");
          return;
        }

        const remainingSlots = maxPhotos - photos.length;

        if (imageFiles.length > remainingSlots) {
          showNotification(
            `ÏµúÎåÄ ${maxPhotos}Í∞úÏùò ÏÇ¨ÏßÑÎßå ÏóÖÎ°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§. ${remainingSlots}Í∞úÎßå ÏÑ†ÌÉùÎê©ÎãàÎã§.`,
          );
          imageFiles.splice(remainingSlots);
        }

        // ÏóÖÎ°úÎìú ÏßÑÌñâ ÌëúÏãú
        progressContainer.style.display = "block";

        // ÏóÖÎ°úÎìú ÏãúÎÆ¨Î†àÏù¥ÏÖò
        let progress = 0;
        const interval = setInterval(() => {
          progress += 5;
          progressFill.style.width = `${progress}%`;
          progressText.textContent = `ÏóÖÎ°úÎìú Ï§ë... ${progress}%`;

          if (progress >= 100) {
            clearInterval(interval);
            progressText.textContent = "ÏóÖÎ°úÎìú ÏôÑÎ£å!";

            setTimeout(() => {
              progressContainer.style.display = "none";
              addPhotosToGrid(imageFiles);
            }, 500);
          }
        }, 100);
      }

      // ÏÇ¨ÏßÑÏùÑ Í∑∏Î¶¨ÎìúÏóê Ï∂îÍ∞Ä
      function addPhotosToGrid(files) {
        files.forEach((file) => {
          const reader = new FileReader();

          reader.onload = (e) => {
            const photo = {
              id: Date.now() + Math.random().toString(36).substring(2, 9),
              file: file,
              url: e.target.result,
              name: file.name,
              size: file.size,
              type: file.type,
              uploadedAt: new Date(),
            };

            photos.push(photo);
            renderPhoto(photo);
            updatePhotoCount();
          };

          reader.readAsDataURL(file);
        });
      }

      // ÏÇ¨ÏßÑ Î†åÎçîÎßÅ
      function renderPhoto(photo) {
        const photoElement = document.createElement("div");
        photoElement.className = "photo-preview";
        photoElement.dataset.id = photo.id;

        photoElement.innerHTML = `
        <div class="photo-container">
          <img src="${photo.url}" alt="${photo.name}" class="photo-image">
          <div class="photo-overlay">
            <div class="photo-info">
              <span class="photo-name">${photo.name}</span>
              <span class="photo-size">${(photo.size / 1024 / 1024).toFixed(1)}MB</span>
            </div>
            <div class="photo-actions">
              <button class="photo-action-button delete" title="ÏÇ≠Ï†ú">üóëÔ∏è</button>
            </div>
          </div>
        </div>
        <div class="photo-index">${photos.length}</div>
      `;

        // ÏÇ≠Ï†ú Î≤ÑÌäº Ïù¥Î≤§Ìä∏
        const deleteBtn = photoElement.querySelector(".delete");
        deleteBtn.addEventListener("click", () => {
          deletePhoto(photo.id);
        });

        photosGrid.appendChild(photoElement);
      }

      // ÏÇ¨ÏßÑ ÏÇ≠Ï†ú
      function deletePhoto(id) {
        const index = photos.findIndex((photo) => photo.id === id);

        if (index !== -1) {
          photos.splice(index, 1);

          // DOMÏóêÏÑú Ï†úÍ±∞
          const photoElement = document.querySelector(
            `.photo-preview[data-id="${id}"]`,
          );
          if (photoElement) {
            photoElement.remove();
          }

          // Ïù∏Îç±Ïä§ ÏóÖÎç∞Ïù¥Ìä∏
          const photoElements = document.querySelectorAll(".photo-preview");
          photoElements.forEach((element, i) => {
            const indexElement = element.querySelector(".photo-index");
            if (indexElement) {
              indexElement.textContent = i + 1;
            }
          });

          updatePhotoCount();
          showNotification("ÏÇ¨ÏßÑÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.");
        }
      }

      // ÏÇ¨ÏßÑ Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
      function updatePhotoCount() {
        if (photos.length === 0) {
          photoCount.textContent =
            "ÏÇ¨ÏßÑÏùÑ ÎìúÎûòÍ∑∏ÌïòÏó¨ ÎÜìÍ±∞ÎÇò ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî";
        } else {
          photoCount.textContent = `${photos.length}/${maxPhotos}Í∞ú ÏÇ¨ÏßÑ Ï∂îÍ∞ÄÎê®`;
        }
      }

      // Ï†ÄÏû• Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
      saveBtn.addEventListener("click", () => {
        const title = journalTitle.value.trim();
        const description = journalDescription.value.trim();

        if (!title) {
          showNotification("Ï†úÎ™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
          return;
        }

        if (photos.length === 0) {
          showNotification("ÏµúÏÜå 1Í∞úÏùò ÏÇ¨ÏßÑÏùÑ Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî.");
          return;
        }

        // Ï†ÄÏû• ÏãúÎÆ¨Î†àÏù¥ÏÖò
        showNotification("ÏùºÏßÄÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!");

        // Ï†ÄÏû• ÌõÑ Ìèº Ï¥àÍ∏∞Ìôî
        setTimeout(() => {
          journalTitle.value = "";
          journalDescription.value = "";
          photos = [];
          photosGrid.innerHTML = "";
          updatePhotoCount();
        }, 1000);
      });

      // ÏïåÎ¶º ÌëúÏãú
      function showNotification(message) {
        notification.textContent = message;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, 3000);
      }
    </script>
  </body>
</html>
